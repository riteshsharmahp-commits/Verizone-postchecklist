<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Post Cutover Checklist</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fa;
  padding: 20px;
}
h2 {
  margin-bottom: 10px;
}
.top-form {
  background: #fff;
  padding: 12px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-bottom: 15px;
}
.top-form label {
  font-weight: bold;
}
.top-form input {
  width: 100%;
  padding: 6px;
  margin: 5px 0 10px 0;
}
.check-item {
  background: #fff;
  padding: 12px;
  margin-bottom: 8px;
  border-radius: 6px;
  border: 1px solid #ddd;
}
.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.actions button {
  padding: 5px 14px;
  margin-left: 6px;
  border-radius: 4px;
  border: 1px solid #aaa;
  cursor: pointer;
}
.actions button.ok {
  background: #28a745;
  color: #fff;
}
.actions button.nok {
  background: #dc3545;
  color: #fff;
}
.comment {
  width: 100%;
  margin-top: 8px;
  padding: 6px;
  display: none;
}
.error {
  color: red;
  font-size: 13px;
  display: none;
  margin-top: 4px;
}
button.generate, button.copy {
  margin-top: 15px;
  padding: 10px 22px;
  background: #0056d2;
  color: #fff;
  border: none;
  cursor: pointer;
  border-radius: 4px;
}
#report {
  margin-top: 20px;
  background: #fff;
  padding: 15px;
  border-radius: 6px;
  border: 1px solid #ddd;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #aaa;
  padding: 8px;
  text-align: left;
}
th {
  background: #eee;
}
</style>
</head>

<body>

<h2>Postcheck Cutover Checklist</h2>

<!-- üîπ Top Editable Fields -->
<div class="top-form">
  <label>Node Name</label>
  <input type="text" id="nodeName" placeholder="Enter Node Name">

  <label>Software Version</label>
  <input type="text" id="softwareVersion" placeholder="Enter Software Version">
</div>

<div id="checklist"></div>

<button class="generate" onclick="if(validateChecklist()) generateReport()">Generate Report</button>

<div id="report" style="display:none;">
  <h3>Checklist Report</h3>
  <button class="copy" onclick="copyReport()">Copy Report to Clipboard</button>
  <div id="reportTable"></div>
</div>

<script>
// ‚úÖ New Checklist
const checklistData = [
  "Integration Complete",
  "Alarms",
  "Cell Status",
  "Radio Status",
  "ENM Status",
  "Baseline Execution",
  "Term Point Status",
  "ERAN Status and Traffic",
  "UE Traffic",
  "VSWR, RSSI, Light Levels",
  "SAU / External Alarms Status",
  "Relations Clean-up",
  "RET",
  "Call Test",
  "Counters"
];

const container = document.getElementById("checklist");

checklistData.forEach(text => {
  const div = document.createElement("div");
  div.className = "check-item";
  div.innerHTML = `
    <div class="row">
      <span>${text}</span>
      <div class="actions">
        <button onclick="selectOption(this,'OK')">OK</button>
        <button onclick="selectOption(this,'NOK')">NOK</button>
      </div>
    </div>
    <textarea class="comment" placeholder="Enter comments"></textarea>
    <div class="error">‚ö† Comment required when NOK selected</div>
  `;
  container.appendChild(div);
});

// ‚úÖ OK & NOK both show comment
function selectOption(btn, choice) {
  const item = btn.closest('.check-item');
  const buttons = item.querySelectorAll('button');
  const comment = item.querySelector('.comment');
  const error = item.querySelector('.error');

  buttons.forEach(b => b.classList.remove('ok','nok'));
  comment.style.display = 'block';

  if(choice === 'OK'){
    btn.classList.add('ok');
    error.style.display = 'none';
    item.dataset.answer = 'OK';
  } else {
    btn.classList.add('nok');
    item.dataset.answer = 'NOK';
  }
}

// ‚úÖ Validation
function validateChecklist() {
  let valid = true;
  document.querySelectorAll('.check-item').forEach(item => {
    const ans = item.dataset.answer;
    const comment = item.querySelector('.comment');
    const error = item.querySelector('.error');

    if(!ans) valid = false;

    if(ans === 'NOK' && comment.value.trim() === ''){
      error.style.display = 'block';
      valid = false;
    } else {
      error.style.display = 'none';
    }
  });

  if(!valid){
    alert("‚ùå Please complete checklist (NOK requires comments)");
    return false;
  }
  return true;
}

// ‚úÖ Generate Report
function generateReport(){
  const node = document.getElementById('nodeName').value || '-';
  const sw = document.getElementById('softwareVersion').value || '-';

  let html = `
    <p><b>Node Name:</b> ${node}</p>
    <p><b>Software Version:</b> ${sw}</p>
    <table>
    <tr><th>Task</th><th>Status</th><th>Remarks</th></tr>
  `;

  document.querySelectorAll('.check-item').forEach(item => {
    html += `
      <tr>
        <td>${item.querySelector('span').innerText}</td>
        <td>${item.dataset.answer}</td>
        <td>${item.querySelector('.comment').value || '-'}</td>
      </tr>
    `;
  });

  html += '</table>';
  document.getElementById('reportTable').innerHTML = html;
  document.getElementById('report').style.display = 'block';
}

// ‚úÖ Copy Report
function copyReport(){
  let text = `Postcheck Cutover Checklist\n\n`;
  text += `Node Name: ${document.getElementById('nodeName').value || '-'}\n`;
  text += `Software Version: ${document.getElementById('softwareVersion').value || '-'}\n\n`;

  document.querySelectorAll('.check-item').forEach(item => {
    text += `‚Ä¢ ${item.querySelector('span').innerText}\n`;
    text += `  Status: ${item.dataset.answer}\n`;
    text += `  Remarks: ${item.querySelector('.comment').value || '-'}\n\n`;
  });

  navigator.clipboard.writeText(text);
  alert("‚úÖ Report copied to clipboard");
}
</script>

</body>
</html>
