<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Post Cutover Checklist</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fa;
  padding: 20px;
}
.check-item {
  background: #fff;
  padding: 12px;
  margin-bottom: 8px;
  border-radius: 6px;
  border: 1px solid #ddd;
}
.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.actions button {
  padding: 5px 14px;
  margin-left: 6px;
  border-radius: 4px;
  border: 1px solid #aaa;
  cursor: pointer;
}
.actions button.ok {
  background: #28a745;
  color: #fff;
}
.actions button.nok {
  background: #dc3545;
  color: #fff;
}
.comment {
  width: 100%;
  margin-top: 8px;
  padding: 6px;
  display: none;
}
.error {
  color: red;
  font-size: 13px;
  display: none;
  margin-top: 4px;
}
button.generate, button.copy {
  margin-top: 15px;
  padding: 10px 22px;
  background: #0056d2;
  color: #fff;
  border: none;
  cursor: pointer;
  border-radius: 4px;
}
#report {
  margin-top: 20px;
  background: #fff;
  padding: 15px;
  border-radius: 6px;
  border: 1px solid #ddd;
  display: none;
}
table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  border: 1px solid #aaa;
  padding: 8px;
}
th {
  background: #eee;
}
</style>
</head>

<body>

<h2>Postcheck Cutover Checklist (HOT SWAP)</h2>

<div id="checklist"></div>

<button class="generate" onclick="if(validateChecklist()) generateReport()">Generate Report</button>

<div id="report">
  <h3>Checklist Report</h3>
  <button class="copy" onclick="copyReport()">Copy Report</button>
  <div id="reportTable"></div>
</div>

<script>
// ✅ NEW Checklist
const checklistData = [
  "Integration Complete",
  "Alarms",
  "Cell Status",
  "Radio Status",
  "ENM Status",
  "Baseline Execution",
  "Term Point Status",
  "ERAN Status and Traffic",
  "UE Traffic",
  "VSWR, RSSI, Light Levels",
  "SAU / External Alarms Status",
  "Relations Clean-up",
  "RET",
  "Call Test",
  "Counters"
];

const container = document.getElementById("checklist");

// Create checklist UI
checklistData.forEach(text => {
  const div = document.createElement("div");
  div.className = "check-item";
  div.innerHTML = `
    <div class="row">
      <span>${text}</span>
      <div class="actions">
        <button onclick="selectOption(this,'OK')">OK</button>
        <button onclick="selectOption(this,'NOK')">NOK</button>
      </div>
    </div>
    <textarea class="comment" placeholder="Enter remarks if NOK"></textarea>
    <div class="error">⚠ Remark required when NOK selected</div>
  `;
  container.appendChild(div);
});

// OK / NOK selection
function selectOption(btn, choice) {
  const item = btn.closest('.check-item');
  const buttons = item.querySelectorAll('button');
  const comment = item.querySelector('.comment');
  const error = item.querySelector('.error');

  buttons.forEach(b => b.classList.remove('ok','nok'));

  if(choice === 'OK'){
    btn.classList.add('ok');
    comment.style.display = 'none';
    comment.value = '';
    error.style.display = 'none';
    item.dataset.answer = 'OK';
  } else {
    btn.classList.add('nok');
    comment.style.display = 'block';
    item.dataset.answer = 'NOK';
  }
}

// Validation
function validateChecklist() {
  let valid = true;
  document.querySelectorAll('.check-item').forEach(item => {
    const ans = item.dataset.answer;
    const comment = item.querySelector('.comment');
    const error = item.querySelector('.error');

    if(!ans) valid = false;

    if(ans === 'NOK' && comment.value.trim() === ''){
      error.style.display = 'block';
      valid = false;
    } else {
      error.style.display = 'none';
    }
  });

  if(!valid){
    alert("❌ Please complete checklist (NOK requires remarks)");
    return false;
  }
  return true;
}

// Generate report
function generateReport() {
  const report = document.getElementById("report");
  const reportTable = document.getElementById("reportTable");
  let html = "<table><tr><th>Item</th><th>Status</th><th>Remarks</th></tr>";

  document.querySelectorAll('.check-item').forEach(item => {
    const task = item.querySelector('span').innerText;
    const status = item.dataset.answer;
    const remark = item.querySelector('.comment').value || "-";
    html += `<tr><td>${task}</td><td>${status}</td><td>${remark}</td></tr>`;
  });

  html += "</table>";
  reportTable.innerHTML = html;
  report.style.display = "block";
}

// Copy to clipboard
function copyReport() {
  let text = "Postcheck Cutover Checklist (HOT SWAP)\n\n";
  document.querySelectorAll('.check-item').forEach(item => {
    text += `${item.querySelector('span').innerText} : ${item.dataset.answer}\n`;
  });

  navigator.clipboard.writeText(text);
  alert("✅ Report copied to clipboard");
}
</script>

</body>
</html>
