<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Post Cutover Checklist</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fa;
  padding: 20px;
}
h2 {
  margin-bottom: 15px;
}
.check-item {
  background: #fff;
  padding: 12px;
  margin-bottom: 8px;
  border-radius: 6px;
  border: 1px solid #ddd;
}
.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.actions button {
  padding: 5px 14px;
  margin-left: 6px;
  border-radius: 4px;
  border: 1px solid #aaa;
  cursor: pointer;
}
.actions button.yes {
  background: #28a745;
  color: #fff;
}
.actions button.no {
  background: #dc3545;
  color: #fff;
}
.comment {
  width: 100%;
  margin-top: 8px;
  padding: 6px;
  display: none;
}
.error {
  color: red;
  font-size: 13px;
  display: none;
  margin-top: 4px;
}
button.generate, button.copy {
  margin-top: 15px;
  padding: 10px 22px;
  background: #0056d2;
  color: #fff;
  border: none;
  cursor: pointer;
  border-radius: 4px;
}
#report {
  margin-top: 20px;
  background: #fff;
  padding: 15px;
  border-radius: 6px;
  border: 1px solid #ddd;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #aaa;
  padding: 8px;
  text-align: left;
}
th {
  background: #eee;
}
textarea.remark {
  width: 100%;
  padding: 4px;
}
</style>
</head>
<body>

<h2>Postcheck Cutover Checklist (HOT SWAP)</h2>

<div id="checklist"></div>

<button class="generate" onclick="if(validateChecklist()) generateReport()">Generate Report</button>

<div id="report" style="display:none;">
  <h3>Checklist Report</h3>
  <button class="copy" onclick="copyReport()">Copy Report to Clipboard</button>
  <div id="reportTable"></div>
</div>

<script>
// ✅ Checklist Data
const checklistData = [
  "PRE-POST Nokia SCF backup taken",
  "Carrier Aggregation DL/UL verified",
  "Traffic free and no call drop observed",
  "Cell availability normal",
  "Nokia alarms migrated to Ericsson SAU",
  "All alarms cleared post cutover",
  "RET & TILT verified using CSI tool",
  "Call testing completed",
  "VoLTE call successful",
  "Data service validated",
  "Throughput verified",
  "Handover successful",
  "OSS counters normal",
  "Neighbor relations verified",
  "Site locked/unlocked successfully",
  "Rollback plan not required",
  "Post cutover monitoring completed"
];

// ✅ Create Checklist Items
const container = document.getElementById("checklist");

checklistData.forEach(text => {
  const div = document.createElement("div");
  div.className = "check-item";
  div.innerHTML = `
    <div class="row">
      <span>${text}</span>
      <div class="actions">
        <button onclick="selectOption(this,'yes')">Yes</button>
        <button onclick="selectOption(this,'no')">No</button>
      </div>
    </div>
    <textarea class="comment remark" placeholder="Enter remarks if NO"></textarea>
    <div class="error">⚠ Comment required when NO selected</div>
  `;
  container.appendChild(div);
});

// ✅ Select Yes/No
function selectOption(btn, choice) {
  const item = btn.closest('.check-item');
  const buttons = item.querySelectorAll('button');
  const comment = item.querySelector('.comment');
  const error = item.querySelector('.error');

  buttons.forEach(b => b.classList.remove('yes','no'));

  if(choice==='yes'){
    btn.classList.add('yes');
    comment.style.display='none';
    error.style.display='none';
    comment.value='';
    item.dataset.answer='YES';
  } else {
    btn.classList.add('no');
    comment.style.display='block';
    item.dataset.answer='NO';
  }
}

// ✅ Validate Checklist
function validateChecklist() {
  let valid = true;
  document.querySelectorAll('.check-item').forEach(item=>{
    const ans = item.dataset.answer;
    const comment = item.querySelector('.comment');
    const error = item.querySelector('.error');

    if(!ans) valid=false;

    if(ans==='NO' && comment.value.trim()===''){
      error.style.display='block';
      valid=false;
    } else {
      error.style.display='none';
    }
  });
  if(!valid){
    alert("❌ Please complete checklist (NO requires remarks)");
    return false;
  }
  return true;
}

// ✅ Generate Report Table
function generateReport(){
  const reportDiv = document.getElementById('report');
  const reportTableDiv = document.getElementById('reportTable');
  reportTableDiv.innerHTML = '';

  let tableHTML = '<table><tr><th>Task</th><th>Status</th><th>Remarks</th></tr>';

  document.querySelectorAll('.check-item').forEach(item=>{
    const task = item.querySelector('.row span').innerText;
    const status = item.dataset.answer || 'NOT ANSWERED';
    const remark = item.querySelector('.comment').value.trim() || '-';
    tableHTML += `<tr><td>${task}</td><td>${status}</td><td>${remark}</td></tr>`;
  });

  tableHTML += '</table>';
  reportTableDiv.innerHTML = tableHTML;
  reportDiv.style.display='block';
}

// ✅ Copy Report to Clipboard
function copyReport(){
  const reportTableDiv = document.getElementById('reportTable');
  let textToCopy = 'Postcheck Cutover Checklist Status (HOT SWAP):\n\n';

  document.querySelectorAll('.check-item').forEach(item=>{
    const task = item.querySelector('.row span').innerText;
    const status = item.dataset.answer || 'NOT ANSWERED';
    const remark = item.querySelector('.comment').value.trim() || '-';
    textToCopy += `• ${task}\n  Status: ${status}\n  Remarks: ${remark}\n\n`;
  });

  const temp = document.createElement('textarea');
  temp.value = textToCopy;
  document.body.appendChild(temp);
  temp.select();
  document.execCommand('copy');
  document.body.removeChild(temp);

  alert('✅ Checklist copied to clipboard! You can now paste it in your email.');
}
</script>

</body>
</html>
